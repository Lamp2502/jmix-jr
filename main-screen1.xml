<window xmlns="http://jmix.io/schema/ui/window"
        caption="msg://application.caption"
        xmlns:c="http://jmix.io/schema/ui/jpql-condition"
        focusComponent="form">
    <data>
        <instance id="userDc"
                  class="ru.lamp2502.jmixjavarush.entity.User">
            <fetchPlan extends="_base"/>
            <loader id="userDl">
                <query>
                    <![CDATA[select e from User e]]>
                    <condition>
                        <c:jpql>
                            <c:where>e.username like :username</c:where>
                        </c:jpql>
                    </condition>
                </query>
            </loader>
        </instance>
    </data>
    <actions>
        <action id="windowCommitAndClose"
                caption="msg:///actions.Ok"
                icon="EDITOR_OK"
                primary="true"
                shortcut="${COMMIT_SHORTCUT}"/>
        <action id="windowClose"
                caption="msg:///actions.Close"
                icon="EDITOR_CANCEL"/>
    </actions>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>

    <layout>
        <cssLayout id="mainLayoutMainMeny" width="100%" height="100%">
            <cssLayout id="headerFrame1"
                       stylename="header-frame-1">
                <hbox width="100%" height="100%">
                    <label value="АО “Выксунский металлургический завод”"
                           stylename="header-text" align="MIDDLE_LEFT"/>

                    <image id="fileRefImage"
                           stylename="header-avatar"
                           css="width:56px; height:56px; top:calc(50%-56px/2); right:122px;"
                           scaleMode="SCALE_DOWN"
                           alternateText="фото не установлено"
                           dataContainer="userDc"
                           property="image" align="MIDDLE_RIGHT">
                    </image>
                </hbox>
            </cssLayout>

            <cssLayout id="horizontalWrap" stylename="side-meny">
                <cssLayout id="appTitleBox"
                           width="100%">
                    <image id="logoImage"
                           stylename="app-icon"
                           scaleMode="SCALE_DOWN">
                        <resource>
                            <theme path="branding/logo.svg"/>
                        </resource>
                    </image>
                </cssLayout>
                <cssLayout id="controlBox" height="100%">
                    <vbox id="boxOfButtons" spacing="true">
                        <linkButton id="contracts"
                                    stylename="side-meny-contract-button"
                                    icon="branding/contracts.svg"
                                    caption="Договоры"/>
                        <linkButton id="documents"
                                    stylename="side-meny-contract-button"
                                    icon="branding/documents.svg"
                                    caption="Документы"/>
                        <linkButton id="tasks"
                                    stylename="side-meny-contract-button"
                                    icon="branding/tasks.svg"
                                    caption="Задачи"/>
                        <linkButton id="reports"
                                    stylename="side-meny-contract-button"
                                    icon="branding/reports.svg"
                                    caption="Отчёты"/>
                        <logoutButton id="logoutButton"
                                      stylename="side-meny-contract-button"
                                      icon="SIGN_OUT"
                                      caption="Выход"
                                      description="msg://logoutBtnDescription"/>

                        <cssLayout id="adminPanel" stylename="lower-button">
                            <userIndicator id="userIndicator"/>
                            <sideMenu id="sideMenu"
                                      width="100%"/>
                        </cssLayout>
                    </vbox>
                </cssLayout>
            </cssLayout>

            <workArea id="workArea" stylename="work-area">
                <initialLayout spacing="true" margin="true" >
                    <cssLayout stylename="photo-on-work-area" css="background: #FFFFFF;">

                        <image id="image" dataContainer="userDc" property="image"
                               align="MIDDLE_LEFT" css="background: #EFEFEF; position:absolute; top:48px; left:40px;"/>
                    </cssLayout>

                    <form id="form" dataContainer="userDc" css="position: absolute; top:240px; left:40px">
                        <column width="350px">
                            <textField id="cellphoneField" property="cellphone" />
                            <textField id="emailField" property="email" />
                            <textField id="workphoneField" property="workphone" />
                            <textField id="usernameField" property="username" editable="false"/>
                            <passwordField id="passwordField"
                                           caption="msg://ru.lamp2502.jmixjavarush.entity/User.password" required="true"
                                           visible="false"/>
                        </column>
                    </form>
                    <hbox id="editActions" spacing="true">
                        <button id="commitAndCloseBtn" action="windowCommitAndClose"/>
                        <button id="closeBtn" action="windowClose"/>
                    </hbox>
                </initialLayout>
            </workArea>
        </cssLayout>
    </layout>
</window>