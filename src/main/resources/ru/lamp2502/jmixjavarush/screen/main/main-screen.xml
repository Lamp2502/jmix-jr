<window xmlns="http://jmix.io/schema/ui/window"
        caption="msg://application.caption"
        xmlns:c="http://jmix.io/schema/ui/jpql-condition">
    <data>
        <instance id="userDc"
                  class="ru.lamp2502.jmixjavarush.entity.User">
            <fetchPlan extends="_base"/>
            <loader id="userDl">
                <query>
                    <![CDATA[select e from User e]]>
                    <condition>
                        <c:jpql>
                            <c:where>e.username like :username</c:where>
                        </c:jpql>
                    </condition>
                </query>
            </loader>
        </instance>
    </data>
    <actions>
        <action id="windowCommitAndClose"
                caption="msg:///actions.Ok"
                icon="EDITOR_OK"
                primary="true"
                shortcut="${COMMIT_SHORTCUT}"/>
        <action id="windowClose"
                caption="msg:///actions.Close"
                icon="EDITOR_CANCEL"/>
    </actions>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>

    <layout>
        <cssLayout id="headerFrame1"
                   stylename="header-frame-1"
                   width="100%" align="TOP_RIGHT">
            <hbox width="100%" height="100%" align="MIDDLE_RIGHT">
                <label value="АО “Выксунский металлургический завод”"
                       stylename="header-text"
                       align="MIDDLE_LEFT"/>

                <cssLayout id="avatar" stylename="header-avatar"
                           align="MIDDLE_RIGHT">
                    <image id="fileRefImage"
                           stylename="header-avatar"
                           css="width: 56px; height: 56px;"
                           scaleMode="SCALE_DOWN"
                           alternateText="фото не установлено"
                           align="MIDDLE_RIGHT"
                           dataContainer="userDc"
                           property="image">

                    </image>
                </cssLayout>
            </hbox>
        </cssLayout>

        <cssLayout id="horizontalWrap" stylename="side-meny">
            <cssLayout id="appTitleBox"
                       width="100%">
                <image id="logoImage"
                       stylename="app-icon"
                       scaleMode="SCALE_DOWN">
                    <resource>
                        <theme path="branding/logo.svg"/>
                    </resource>
                </image>
            </cssLayout>
            <cssLayout id="controlBox" height="100%">
                <vbox id="boxOfButtons" spacing="true">
                    <linkButton id="contracts"
                                stylename="side-meny-contract-button"
                                icon="branding/contracts.svg"
                                caption="Договоры"/>
                    <linkButton id="documents"
                                stylename="side-meny-contract-button"
                                icon="branding/documents.svg"
                                caption="Документы"/>
                    <linkButton id="tasks"
                                stylename="side-meny-contract-button"
                                icon="branding/tasks.svg"
                                caption="Задачи"/>
                    <linkButton id="reports"
                                stylename="side-meny-contract-button"
                                icon="branding/reports.svg"
                                caption="Отчёты"/>
                    <logoutButton id="logoutButton"
                                  stylename="side-meny-contract-button"
                                  icon="SIGN_OUT"
                                  caption="Выход"
                                  description="msg://logoutBtnDescription"/>

                    <userIndicator id="userIndicator"/>
                    <sideMenu id="sideMenu"
                              width="100%"
                              stylename="jmix-drawer-content"/>
                </vbox>
            </cssLayout>


            <workArea id="workArea"
                      stylename="work-area"
                      width="100%" height="100%">

                <initialLayout spacing="true" margin="true" stylename="work-area"
                               expand="editActions1">
                    <form id="form" dataContainer="userDc">
                        <column width="350px">
                            <fileStorageUpload id="fileField" property="image"/>
                            <image id="image" property="image" width="50%" height="50%"/>
                            <textField id="usernameField" property="username" editable="false"/>
                        </column>
                    </form>
                    <hbox id="editActions1" spacing="true">
                        <button id="commitAndCloseBtn" action="windowCommitAndClose"/>
                        <button id="closeBtn" action="windowClose"/>
                    </hbox>
                </initialLayout>
            </workArea>
        </cssLayout>
    </layout>
</window>